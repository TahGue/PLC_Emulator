<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLC Factory Emulator</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <header class="app-header">
            <div class="header-left">
                <h1>‚ö° PLC Factory Emulator</h1>
            </div>
            <div class="header-center">
                <div class="status-bar">
                    <div class="status-item">
                        <span class="status-label">PLC</span>
                        <span id="plc-status" class="status-value plc-stopped">STOPPED</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Mode</span>
                        <span id="mode-status" class="status-value">EDIT</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Components</span>
                        <span id="comp-count" class="status-value">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Wires</span>
                        <span id="wire-count" class="status-value">0</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Backend</span>
                        <span id="backend-status" class="status-value backend-offline">OFFLINE</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Stream</span>
                        <span id="stream-status" class="status-value backend-offline">OFF</span>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="mode-toggle">
                    <button id="mode-edit-btn" class="mode-btn active" title="Edit Mode">‚úèÔ∏è Edit</button>
                    <button id="mode-sim-btn" class="mode-btn" title="Simulate Mode">‚ñ∂Ô∏è Simulate</button>
                </div>
            </div>
        </header>

        <!-- ‚îÄ‚îÄ Editor Toolbar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="editor-toolbar">
            <div class="toolbar-group">
                <button id="zoom-in-btn" class="tool-btn" title="Zoom In">üîç+</button>
                <button id="zoom-out-btn" class="tool-btn" title="Zoom Out">üîç‚àí</button>
                <button id="zoom-fit-btn" class="tool-btn" title="Fit View">‚äû</button>
                <button id="toggle-grid-btn" class="tool-btn active" title="Toggle Grid">‚äû Grid</button>
                <button id="toggle-snap-btn" class="tool-btn active" title="Toggle Snap">üß≤ Snap</button>
            </div>
            <div class="toolbar-group">
                <label class="tool-label">Presets:</label>
                <select id="preset-select" class="tool-select">
                    <option value="">‚Äî Empty Canvas ‚Äî</option>
                    <option value="bottle_factory">Bottle Factory Line</option>
                    <option value="sorting_station">Sorting Station</option>
                    <option value="mixing_process">Mixing Process</option>
                    <option value="conveyor_merge">Conveyor Merge Control</option>
                    <option value="cip_sequence">CIP Cleaning Cycle</option>
                </select>
                <button id="load-preset-btn" class="tool-btn">Load</button>
            </div>
            <div class="toolbar-group">
                <button id="save-layout-btn" class="tool-btn" title="Save Layout">üíæ Save</button>
                <button id="load-layout-btn" class="tool-btn" title="Load Layout">üìÇ Load</button>
                <button id="clear-layout-btn" class="tool-btn tool-btn-danger" title="Clear All">üóëÔ∏è Clear</button>
            </div>
            <div class="toolbar-group toolbar-sim-controls" id="sim-controls" style="display:none;">
                <button id="start-btn" class="control-btn start-btn">‚ñ∂ START</button>
                <button id="stop-btn" class="control-btn stop-btn">‚èπ STOP</button>
                <button id="reset-btn" class="control-btn reset-btn">‚Ü∫ RESET</button>
                <button id="emergency-btn" class="control-btn emergency-btn">‚ö† E-STOP</button>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ Main Workspace ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="editor-workspace">
            <!-- Component Palette (Left Sidebar) -->
            <div class="component-palette" id="component-palette">
                <div class="palette-header">Components</div>
                <div class="palette-search">
                    <input type="text" id="palette-search" placeholder="Search components..." />
                </div>
                <div id="palette-categories" class="palette-categories">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- SVG Canvas (Center) -->
            <div class="editor-canvas-wrapper">
                <svg id="editor-canvas" class="editor-canvas"></svg>
                <div class="canvas-hint" id="canvas-hint">
                    Drag components from the palette ‚Üí Drop on canvas ‚Üí Connect ports by clicking
                </div>
            </div>

            <!-- Property Panel (Right Sidebar) -->
            <div class="property-panel" id="property-panel">
                <div class="panel-header">Properties</div>
                <div id="prop-content" class="prop-content">
                    <div class="prop-placeholder">Select a component to edit its properties</div>
                </div>
            </div>
        </div>

        <!-- ‚îÄ‚îÄ Detail Sections (Below Editor) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="detail-grid">
            <!-- Ladder Logic -->
            <section class="ladder-section">
                <h2>Ladder Logic</h2>
                <div class="ladder-container">
                    <canvas id="ladder-canvas" width="400" height="600"></canvas>
                </div>
                <div class="ladder-controls">
                    <button id="edit-ladder-btn" class="control-btn">Edit Logic</button>
                    <button id="run-scan-btn" class="control-btn">Run Scan</button>
                </div>
                <div id="ladder-editor-panel" class="ladder-editor-panel" style="display:none">
                    <div class="ladder-editor-row">
                        <label for="ladder-rung-select">Rung</label>
                        <select id="ladder-rung-select"></select>
                        <button id="ladder-add-rung-btn" class="control-btn">+ Rung</button>
                        <button id="ladder-delete-rung-btn" class="control-btn">- Rung</button>
                    </div>
                    <div class="ladder-editor-row">
                        <label for="ladder-inst-select">Instruction</label>
                        <select id="ladder-inst-select"></select>
                        <label for="ladder-inst-type">Type</label>
                        <select id="ladder-inst-type"></select>
                    </div>
                    <div class="ladder-editor-row">
                        <label for="ladder-op-a">Operand A</label>
                        <input id="ladder-op-a" type="text" placeholder="I:0/1 or T:1" />
                        <label for="ladder-op-b">Operand B</label>
                        <input id="ladder-op-b" type="number" placeholder="Preset" min="1" step="1" />
                    </div>
                    <div class="ladder-editor-row ladder-editor-actions">
                        <button id="ladder-add-inst-btn" class="control-btn">Add Inst</button>
                        <button id="ladder-update-inst-btn" class="control-btn">Update Inst</button>
                        <button id="ladder-delete-inst-btn" class="control-btn">Delete Inst</button>
                    </div>
                    <pre id="ladder-editor-summary" class="ladder-editor-summary"></pre>
                    <div id="ladder-editor-msg" class="ladder-editor-msg">Editor ready.</div>
                </div>
            </section>

            <!-- I/O Status -->
            <section class="io-section">
                <h2>I/O Status</h2>
                <div class="io-grid">
                    <div class="io-group">
                        <h3>Inputs (I:0/0 ‚Äì I:0/15)</h3>
                        <div class="io-list" id="io-inputs-list">
                            <!-- Populated by JS from engine address map -->
                        </div>
                    </div>
                    <div class="io-group">
                        <h3>Outputs (O:0/0 ‚Äì O:0/15)</h3>
                        <div class="io-list" id="io-outputs-list">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Real-Time Monitoring -->
        <section class="monitoring-section">
            <h2>Real-Time Monitoring &amp; Analysis</h2>
            <div class="monitoring-grid">
                <div class="metric-card">
                    <h3>Components</h3>
                    <div class="metric-value" id="metric-components">0</div>
                    <div class="metric-unit">placed</div>
                </div>
                <div class="metric-card">
                    <h3>Active Sensors</h3>
                    <div class="metric-value" id="metric-sensors">0</div>
                    <div class="metric-unit">triggered</div>
                </div>
                <div class="metric-card">
                    <h3>Active Actuators</h3>
                    <div class="metric-value" id="metric-actuators">0</div>
                    <div class="metric-unit">running</div>
                </div>
                <div class="metric-card">
                    <h3>Cycle Time</h3>
                    <div class="metric-value" id="cycle-time">100ms</div>
                    <div class="metric-unit">PLC scan</div>
                </div>
                <div class="metric-card">
                    <h3>Process Score</h3>
                    <div class="metric-value" id="anomaly-score">0</div>
                    <div class="metric-unit">0-100</div>
                </div>
                <div class="metric-card">
                    <h3>Network Score</h3>
                    <div class="metric-value" id="network-risk">0</div>
                    <div class="metric-unit">0-100</div>
                </div>
                <div class="metric-card">
                    <h3>Confidence</h3>
                    <div class="metric-value" id="model-confidence">100</div>
                    <div class="metric-unit">%</div>
                </div>
                <div class="metric-card">
                    <h3>Packet Rate</h3>
                    <div class="metric-value" id="packet-rate-live">130</div>
                    <div class="metric-unit">pkt/s</div>
                </div>
            </div>
        </section>

        <!-- Scan Cycle Debugger -->
        <section class="scan-section" id="scan-section">
            <div class="scan-header">
                <h2>üî¨ Scan Cycle Debugger</h2>
                <div class="scan-header-controls">
                    <span class="scan-stat-badge" id="scan-rate-badge">0 scans/s</span>
                    <span class="scan-stat-badge" id="scan-avg-badge">avg: ‚Äî</span>
                    <span class="scan-stat-badge" id="scan-max-badge">max: ‚Äî</span>
                    <button class="control-btn scan-pause-btn" id="scan-pause-btn">‚è∏ Pause</button>
                    <button class="control-btn" id="scan-clear-btn">üóë Clear</button>
                </div>
            </div>
            <div class="scan-phase-row">
                <canvas id="scan-phase-bar" class="scan-phase-canvas"></canvas>
            </div>
            <div class="scan-layout">
                <div class="scan-timeline-panel">
                    <h3>Scan Timeline</h3>
                    <canvas id="scan-timeline-canvas" class="scan-timeline-canvas"></canvas>
                </div>
                <div class="scan-rung-panel">
                    <h3>Rung Execution Detail</h3>
                    <canvas id="scan-rung-canvas" class="scan-rung-canvas"></canvas>
                </div>
            </div>
        </section>

        <!-- Attack Simulation Panel -->
        <section class="attack-section">
            <div class="attack-header">
                <h2>üõ°Ô∏è Attack Simulation Lab</h2>
                <div class="attack-header-controls">
                    <span class="attack-status" id="attack-status">No attacks active</span>
                    <button id="attack-reset-btn" class="control-btn" title="Deactivate all attacks">üõë Reset
                        All</button>
                </div>
            </div>

            <div class="attack-layout">
                <!-- Attack List -->
                <div class="attack-list-panel">
                    <h3>Available Attacks</h3>
                    <div class="attack-category-filter">
                        <button class="attack-filter-btn active" data-filter="all">All</button>
                        <button class="attack-filter-btn" data-filter="network">Network</button>
                        <button class="attack-filter-btn" data-filter="protocol">Protocol</button>
                        <button class="attack-filter-btn" data-filter="process">Process</button>
                        <button class="attack-filter-btn" data-filter="physical">Physical</button>
                    </div>
                    <div class="attack-list" id="attack-list">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Real-Time Packet Monitor -->
                <div class="packet-monitor-panel">
                    <h3>Real-Time Packet Analysis</h3>
                    <div class="packet-stats-row">
                        <div class="packet-stat">
                            <span class="packet-stat-label">Rate</span>
                            <span class="packet-stat-value" id="pkt-rate">130</span>
                            <span class="packet-stat-unit">pkt/s</span>
                        </div>
                        <div class="packet-stat">
                            <span class="packet-stat-label">Burst</span>
                            <span class="packet-stat-value" id="pkt-burst">0.15</span>
                            <span class="packet-stat-unit">ratio</span>
                        </div>
                        <div class="packet-stat">
                            <span class="packet-stat-label">Unauth</span>
                            <span class="packet-stat-value" id="pkt-unauth">0</span>
                            <span class="packet-stat-unit">attempts</span>
                        </div>
                        <div class="packet-stat">
                            <span class="packet-stat-label">Malicious</span>
                            <span class="packet-stat-value" id="pkt-malicious">0%</span>
                            <span class="packet-stat-unit">ratio</span>
                        </div>
                    </div>
                    <div class="packet-bars">
                        <div class="packet-bar-row">
                            <span class="bar-label">Normal</span>
                            <div class="bar-track">
                                <div class="bar-fill bar-normal" id="bar-normal" style="width:100%"></div>
                            </div>
                        </div>
                        <div class="packet-bar-row">
                            <span class="bar-label">Burst</span>
                            <div class="bar-track">
                                <div class="bar-fill bar-burst" id="bar-burst" style="width:0%"></div>
                            </div>
                        </div>
                        <div class="packet-bar-row">
                            <span class="bar-label">Malicious</span>
                            <div class="bar-track">
                                <div class="bar-fill bar-malicious" id="bar-malicious" style="width:0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="packet-log" id="packet-log">
                        <div class="packet-log-header">
                            <span>Time</span><span>Source</span><span>Dest</span><span>Proto</span><span>Len</span><span>Type</span>
                        </div>
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Analysis & Impact -->
                <div class="analysis-impact-panel">
                    <h3>Analysis &amp; Impact</h3>
                    <div class="risk-indicator">
                        <div class="risk-gauge" id="risk-gauge">
                            <div class="risk-gauge-fill" id="risk-gauge-fill"></div>
                            <span class="risk-gauge-label" id="risk-gauge-label">LOW</span>
                        </div>
                    </div>
                    <div class="analysis-detail">
                        <div class="explainability-row"><span>Risk Level</span><strong id="risk-level"
                                class="risk-pill risk-low">LOW</strong></div>
                        <div class="explainability-row"><span>Security Flag</span><strong
                                id="security-flag">CLEAR</strong></div>
                        <div class="explainability-row"><span>Action</span><strong id="recommended-action"
                                class="action-text">Continue baseline monitoring.</strong></div>
                    </div>
                    <div class="component-block">
                        <h4>Process Score Components</h4>
                        <div id="process-components" class="component-list"></div>
                    </div>
                    <div class="component-block">
                        <h4>Network Score Components</h4>
                        <div id="network-components" class="component-list"></div>
                    </div>

                    <h4>Component Impact Feed</h4>
                    <div class="impact-feed" id="impact-feed">
                        <div class="no-alarms">No component impacts</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Failure Injection Panel -->
        <section class="failure-section" id="failure-section">
            <div class="failure-header">
                <h2>üîß Failure Injection Engine</h2>
                <div class="failure-header-controls">
                    <span class="failure-status" id="failure-status">No failures active</span>
                    <button id="failure-reset-btn" class="control-btn" title="Deactivate all failures">üõë Reset All</button>
                </div>
            </div>
            <div class="failure-layout">
                <div class="failure-list-panel">
                    <h3>Physical Failures</h3>
                    <div class="failure-category-filter">
                        <button class="failure-filter-btn active" data-filter="all">All</button>
                        <button class="failure-filter-btn" data-filter="sensor">Sensor</button>
                        <button class="failure-filter-btn" data-filter="actuator">Actuator</button>
                        <button class="failure-filter-btn" data-filter="mechanical">Mechanical</button>
                        <button class="failure-filter-btn" data-filter="process">Process</button>
                        <button class="failure-filter-btn" data-filter="electrical">Electrical</button>
                    </div>
                    <div class="failure-list" id="failure-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
                <div class="failure-impact-panel">
                    <h3>Live Impact Monitor</h3>
                    <div class="failure-stats-row">
                        <div class="failure-stat">
                            <span class="failure-stat-label">Active</span>
                            <span class="failure-stat-value" id="failure-active-count">0</span>
                            <span class="failure-stat-unit">failures</span>
                        </div>
                        <div class="failure-stat">
                            <span class="failure-stat-label">Impacts</span>
                            <span class="failure-stat-value" id="failure-impact-count">0</span>
                            <span class="failure-stat-unit">events</span>
                        </div>
                        <div class="failure-stat">
                            <span class="failure-stat-label">Components</span>
                            <span class="failure-stat-value" id="failure-comp-count">0</span>
                            <span class="failure-stat-unit">affected</span>
                        </div>
                    </div>
                    <div class="failure-impact-feed" id="failure-impact-feed">
                        <div class="no-alarms">No failure impacts</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Station KPI Panel -->
        <section class="station-section" id="station-section">
            <div class="station-header">
                <h2>üè≠ Station Overview</h2>
                <div class="station-header-controls">
                    <span class="station-oee-badge" id="station-oee-badge">OEE: ‚Äî</span>
                    <span class="station-count-badge" id="station-count-badge">0 stations</span>
                </div>
            </div>
            <div class="station-summary-row" id="station-summary-row">
                <div class="station-summary-stat">
                    <span class="station-summary-label">Running</span>
                    <span class="station-summary-value" id="station-running-count">0</span>
                </div>
                <div class="station-summary-stat">
                    <span class="station-summary-label">Idle</span>
                    <span class="station-summary-value" id="station-idle-count">0</span>
                </div>
                <div class="station-summary-stat">
                    <span class="station-summary-label">Faulted</span>
                    <span class="station-summary-value station-fault-val" id="station-faulted-count">0</span>
                </div>
                <div class="station-summary-stat">
                    <span class="station-summary-label">Cycles</span>
                    <span class="station-summary-value" id="station-total-cycles">0</span>
                </div>
                <div class="station-summary-stat">
                    <span class="station-summary-label">Availability</span>
                    <span class="station-summary-value" id="station-availability">100%</span>
                </div>
                <div class="station-summary-stat">
                    <span class="station-summary-label">Performance</span>
                    <span class="station-summary-value" id="station-performance">100%</span>
                </div>
            </div>
            <div class="station-cards" id="station-cards">
                <!-- Populated by JS -->
                <div class="no-alarms">Load a preset and start simulation to see stations</div>
            </div>
        </section>

        <!-- Training Scenario Engine -->
        <section class="training-section" id="training-section">
            <div class="training-header">
                <h2>üéì Training Scenarios</h2>
                <div class="training-header-controls">
                    <span class="training-status-badge" id="training-status-badge">Select a scenario</span>
                    <button class="control-btn" id="training-stop-btn" style="display:none">‚èπ Stop</button>
                </div>
            </div>

            <!-- Scenario Selector -->
            <div class="training-selector" id="training-selector">
                <div class="training-category-filter">
                    <button class="training-filter-btn active" data-filter="all">All</button>
                    <button class="training-filter-btn" data-filter="ladder">Ladder</button>
                    <button class="training-filter-btn" data-filter="failure">Failure</button>
                    <button class="training-filter-btn" data-filter="cyber">Cyber</button>
                    <button class="training-filter-btn" data-filter="timing">Timing</button>
                    <button class="training-filter-btn" data-filter="combined">Combined</button>
                </div>
                <div class="training-scenario-list" id="training-scenario-list">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Live Scoring Overlay (shown during active scenario) -->
            <div class="training-overlay" id="training-overlay" style="display:none">
                <div class="training-overlay-header">
                    <span class="training-scenario-title" id="training-active-title"></span>
                    <span class="training-timer" id="training-timer">0:00</span>
                </div>
                <div class="training-objectives" id="training-objectives">
                    <!-- Populated by JS -->
                </div>
                <div class="training-overlay-controls">
                    <button class="control-btn training-hint-btn" id="training-hint-btn">üí° Hint</button>
                    <span class="training-hint-count" id="training-hint-count"></span>
                </div>
                <div class="training-hint-display" id="training-hint-display" style="display:none"></div>
            </div>

            <!-- Completion Summary (shown after scenario ends) -->
            <div class="training-summary" id="training-summary" style="display:none">
                <div class="training-summary-header" id="training-summary-header"></div>
                <div class="training-summary-score" id="training-summary-score"></div>
                <div class="training-summary-objectives" id="training-summary-objectives"></div>
                <div class="training-summary-details" id="training-summary-details"></div>
                <button class="control-btn" id="training-back-btn">‚Üê Back to Scenarios</button>
            </div>
        </section>

        <!-- ML Anomaly Detection Panel -->
        <section class="anomaly-section" id="anomaly-section">
            <div class="anomaly-header">
                <h2>üß† LSTM Anomaly Detection</h2>
                <div class="anomaly-header-controls">
                    <span class="anomaly-model-badge" id="anomaly-model-badge">Model: not loaded</span>
                    <span class="anomaly-status-badge" id="anomaly-status-badge">Idle</span>
                </div>
            </div>
            <div class="anomaly-layout">
                <!-- Anomaly Score Gauge + History -->
                <div class="anomaly-score-panel">
                    <h3>Anomaly Score</h3>
                    <div class="anomaly-gauge-wrap">
                        <canvas id="anomaly-gauge-canvas" width="200" height="120"></canvas>
                        <div class="anomaly-score-value" id="anomaly-score-value">0.0</div>
                        <div class="anomaly-score-label">reconstruction error</div>
                    </div>
                    <div class="anomaly-stats-row">
                        <div class="anomaly-stat">
                            <span class="anomaly-stat-label">Threshold</span>
                            <span class="anomaly-stat-value" id="anomaly-threshold">‚Äî</span>
                        </div>
                        <div class="anomaly-stat">
                            <span class="anomaly-stat-label">Inference</span>
                            <span class="anomaly-stat-value" id="anomaly-inference-ms">‚Äî ms</span>
                        </div>
                        <div class="anomaly-stat">
                            <span class="anomaly-stat-label">Buffer</span>
                            <span class="anomaly-stat-value" id="anomaly-buffer-fill">0%</span>
                        </div>
                    </div>
                    <div class="anomaly-verdict" id="anomaly-verdict">Waiting for data...</div>
                </div>
                <!-- Score History Chart -->
                <div class="anomaly-chart-panel">
                    <h3>Score History (last 60 ticks)</h3>
                    <canvas id="anomaly-history-canvas" width="500" height="180"></canvas>
                </div>
                <!-- Feature Error Breakdown -->
                <div class="anomaly-features-panel">
                    <h3>Feature Error Breakdown</h3>
                    <div class="anomaly-feature-bars" id="anomaly-feature-bars">
                        <!-- Populated by JS -->
                    </div>
                    <h3 style="margin-top:12px">Attack Classification</h3>
                    <div class="anomaly-attack-probs" id="anomaly-attack-probs">
                        <div class="anomaly-no-data">No attack detected</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Event Feed & Alarms -->
        <section class="monitoring-section">
            <div class="ml-lab-grid">
                <div class="ml-card">
                    <h3>Session KPIs</h3>
                    <div class="kpi-row"><span>Analyses Run</span><strong id="analysis-count">0</strong></div>
                    <div class="kpi-row"><span>Anomaly Hit Rate</span><strong id="anomaly-hit-rate">0%</strong></div>
                    <div class="kpi-row"><span>Avg Inference Latency</span><strong id="avg-inference-latency">0
                            ms</strong></div>
                    <div class="kpi-row"><span>Active Attacks</span><strong id="active-attack-count">0</strong></div>
                    <button id="export-report-btn" class="control-btn export-btn">Export Demo Report</button>
                </div>
                <div class="ml-card">
                    <h3>Model Explainability</h3>
                    <div class="explainability-row"><span>Model Version</span><strong
                            id="model-version">real-time-analyzer-v1</strong></div>
                    <div class="explainability-row"><span>Process Source</span><strong
                            id="process-source">local-analysis</strong></div>
                    <div class="explainability-row"><span>Network Source</span><strong
                            id="network-source">packet-monitor</strong></div>
                    <div class="explainability-row"><span>Vision Inference</span><strong id="vision-inference-ms">0
                            ms</strong></div>
                </div>
            </div>
            <div class="insights-section">
                <h3>Anomaly + Security Feed</h3>
                <div id="detection-feed" class="detection-feed">
                    <div class="no-alarms">No anomaly or security events</div>
                </div>
            </div>
            <div class="alarms-section">
                <h3>Active Alarms</h3>
                <div id="alarms-list" class="alarms-list">
                    <div class="no-alarms">No active alarms</div>
                </div>
            </div>
        </section>
    </div>

    <!-- Hidden file input for layout import -->
    <input type="file" id="layout-file-input" accept=".json" style="display:none" />

    <script src="plc-core.js"></script>
    <script src="component-registry.js"></script>
    <script src="simulation-engine.js"></script>
    <script src="layout-editor.js"></script>
    <script src="ladder-logic.js"></script>
    <script src="telemetry-client.js"></script>
    <script src="attack-simulator.js"></script>
    <script src="failure-engine.js"></script>
    <script src="station-manager.js"></script>
    <script src="scan-debugger.js"></script>
    <script src="training-engine.js"></script>
    <script src="app.js"></script>
</body>

</html>